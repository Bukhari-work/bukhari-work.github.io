---
import ProjectCard from "@/layouts/components/ProjectCard.astro";
const { projects } = Astro.props;
---

<section class="section md:pt-10">
  <div class="swiper">
    <div class="projectDeck-slider max-w-2xl mx-auto">
      <div class="swiper-wrapper">
        {
          projects.map((project) => (
            <div class="swiper-slide">
              <ProjectCard data={project} />
            </div>
          ))
        }
      </div>
      <div
        class="testimonial-slider-pagination mt-9 flex items-center justify-center text-center"
      >
      </div>
    </div>
  </div>
</section>

<script>
  import { Swiper } from "swiper";
  import "swiper/css";
  import "swiper/css/pagination";
  import { Autoplay, Pagination, EffectCards } from "swiper/modules";

  // astro:page-load event is fired when the page is loaded
  document.addEventListener("astro:page-load", () => {
    new Swiper(".projectDeck-slider", {
      effect: "cards",
      cardsEffect: {
        // Disable slide shadows
        slideShadows: false,
        // Adjust rotation angle (default is typically a non-zero value)
        rotate: true,
        perSlideRotate: 4,
        perSlideOffset: 6,
      },
      modules: [EffectCards, Pagination],
      slidesPerView: 1, // Effect Cards works best with one slide per view
      pagination: {
        el: ".testimonial-slider-pagination",
        type: "bullets",
        clickable: true,
      },
    });
  });
</script>
